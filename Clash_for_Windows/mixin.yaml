# author: Waoap
# version: 1.0.0
# update: 2022/10/31 23:14
mixin: # Mixin 配置文件
    dns:
        enable: true
        ipv6: true
        # 从 v0.18.8 版本开始，TUN 模式建议使用 fake-ip 模式，redir-host 将无法进行远端 DNS 解析
        enhanced-mode: fake-ip # redir-host/fake-ip
        fake-ip-range: 198.18.0.1/16 # Fake IP 地址池 (CIDR 形式)
        fake-ip-filter: # 微软系 APP 无法登陆使用等问题，通过添加 fake-ip-filter 解决
            # === Local ===
            - "*.lan"
            - "*.local"
            # === Microsoft Windows Serivice ===
            - "*.msftncsi.com"
            - "*.msftconnecttest.com"
            - "*.ipv6.microsoft.com"
            # === NTP Service ===
            - "time.*.com"
            - "time.*.gov"
            - "time.*.edu.cn"
            - "*.time.edu.cn"
            - "time1.*.com"
            - "time2.*.com"
            - "time3.*.com"
            - "time4.*.com"
            - "time5.*.com"
            - "time6.*.com"
            - "time7.*.com"
            - "ntp.*.com"
            - "ntp1.*.com"
            - "ntp2.*.com"
            - "ntp3.*.com"
            - "ntp4.*.com"
            - "ntp5.*.com"
            - "ntp6.*.com"
            - "ntp7.*.com"
            - "*.ntp.org.cn"
            - "*.pool.ntp.org"
            # === Music Service ===
            ## NetEase
            - "*.music.163.com"
            - "*.126.net"
            ## Baidu
            - "musicapi.taihe.com"
            - "music.taihe.com"
            ## Kugou
            - "songsearch.kugou.com"
            - "trackercdn.kugou.com"
            ## Kuwo
            - "*.kuwo.cn"
            ## JOOX
            - "api-jooxtt.sanook.com"
            - "api.joox.com"
            - "joox.com"
            ## QQ
            - "*.y.qq.com"
            - "*.music.tc.qq.com"
            - "aqqmusic.tc.qq.com"
            - "*.stream.qqmusic.qq.com"
            ## Xiami
            - "*.xiami.com"
            ## Migu
            - "*.music.migu.cn"
            # === Game Service ===
            ## Nintendo Switch
            - "*.n.n.srv.nintendo.net"
            ## Sony PlayStation
            - "*.stun.playstation.net"
            ## Microsoft Xbox
            - "xbox.*.*.microsoft.com"
            - "*.*.xboxlive.com"
            # === Others ===
            ## QQ Quick Login
            - "localhost.ptlogin2.qq.com"
            ## Golang
            - "proxy.golang.org"
            ## STUN Server
            - "stun.*.*"
            - "stun.*.*.*"
            - "stun.*.*.*.*"
            - "stun.*.*.*.*.*"
            ## WORKGROUP
            - WORKGROUP
        default-nameserver:
            - 117.50.10.10 # ONE DNS纯净版 直接返回其真实的响应结果
            - 8.8.8.8 # 谷歌DNS
            - 1.1.1.1 # Cloudflare DNS
        nameserver: # GeoIP 为 CN 时使用的 DNS NameServer
            - 223.5.5.5 # 阿里DNS
            - 180.76.76.76 # 百度DNS
            - 119.29.29.29 # 腾讯DNS
            # - 117.50.11.11 # ONE DNS拦截版 恶意网站拦截、广告过滤
            - 117.50.10.10 # ONE DNS纯净版 直接返回其真实的响应结果
            - 114.114.114.114 # 114DNS
        fallback: # GeoIP 不是 CN 时使用的 DNS NameServer
            # - 8.8.8.8 # 谷歌DNS
            # - 1.1.1.1 # Cloudflare DNS
            - tls://dns.rubyfish.cn:853
            - tls://1.0.0.1:853
            - tls://dns.google:853
            - https://dns.rubyfish.cn/dns-query
            - https://cloudflare-dns.com/dns-query
            - https://dns.google/dns-query
        fallback-filter:
            geoip: true # 启用 GeoIP
            ip-cidr:
                - 240.0.0.0/4
                - 0.0.0.0/32
                - 127.0.0.1/8
            domain:
                - "*.google.com"
                - "*.facebook.com"
                - "*.twitter.com"
                - "*.youtube.com"
                - "*.xn--ngstr-lra8j.com"
                - "*.google.cn"
                - "*.googleapis.cn"
                - "*.googleapis.com"
                - "*.gvt1.com"
    tun: # Tun 配置
        enable: true
        # 使用 system statck 需要 Clash Premium 2021.05.08 及更高版本
        stack: system # gvisor/system 使用 system stack 需要在防火墙放行程序
        dns-hijack:
            - 192.168.0.2:53 # 本地劫持 DNS 地址，无需修改
        auto-route: true
        auto-detect-interface: true # 自动检测出口网卡
